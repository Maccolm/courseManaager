<!DOCTYPE html>
<html lang="uk">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>
		<%= pageTitle %>
	</title>
	<link rel="stylesheet" href="/stylesheets/style.css">
	<script src="/javascripts/RequestManager.js"></script>
	<style>
		.error-message {
			color: red;
			font-size: 0.9em;
		}

		.form-container {
			max-width: 600px;
			margin: 0 auto;
		}

		.field-container {
			margin-bottom: 15px;
		}
	</style>
</head>

<body>
	<%- include('../sections/header', { title: 'User form' }) %>
	<div class="form-container">
		<h1>
			<%= headerTitle %>
		</h1>

		<div id="errors"></div>
		<div id="container">
			<form action="<%= submitUrl %>" class="form" method="post">
				<%if(fields.type === 'select') {%>
					<div class="form__section">
						<label for="<%= field.name %>"><%= field.label %></label>
						<select
							name="<%= field.name %>"
							id="<%= field.name %>"
						>
						<% field.options.forEach(option => { %>
							<option value="<%= option.id %>" 
								 <%= (initialValues[field.name] && initialValues[field.name] === option.id) ? 'selected' : '' %>>
								 <%= option.name %>
							</option>
					  <% }) %>
						</select>
					</div>
				<%}%>
				<% fields.forEach(field => { %>
					<div class="form__section">
						<label for="<%= field.name %>"><%= field.label %></label>
						<input 
							type="<%= field.type %>"
							name="<%= field.name %>"
							id="<%= field.name %>"
							value="<%= initialValues[field.name] || '' %>"
							<%= field.required ? 'required' : '' %>
						/>
					</div>
					<%	}) %>
					<% if (errors && errors.length > 0) { %>
						<ul>
							 <% errors.forEach(error => { %>
								  <li><%= error.msg %></li>
							 <% }) %>
						</ul>
				  <% } %>
				<button class="btn" type="submit"> Submit </button>
			</form>
		</div>
	</div>

</body>

</html>